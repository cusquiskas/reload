var flotaex = {
    "flota": [

        {
            "nombreavion": "Embraer 195",
            "texto": "Una aeronave de última generación con los asientos dispuestos de dos en dos, dejando en el centro un amplio y cómodo pasillo. Es perfecto para cubrir las cortas y medias distancias, con una autonomía de 3.500 kilómetros.<br>Se trata del avión más pequeño de nuestra flota pero a su vez se trata del modelo más grande del fabricante brasileño Embraer. Está configurado con 120 plazas y los once ejemplares que operamos cubren rutas domésticas y europeas.",
            "imagen": "res/img/marcas/embraer195.png",
            "botonDetalle": "spanEmbraer195",
            "datatarget": "Embraer195",
            "longitud": "Longitud : 27.16 m",
            "envergadura": "Envergadura : 28,72 m",
            "alcance": "Alcance : 3.428 km",
            "capacidad": "Capacidad : 108 (turista) +12 (busines)",
            "wifi": "",
            "titulodeta": "Detalles sobre la flota de Embraer 195:",
            "aviones": [
                {

                    "modelo": "E195",
                    "matricula": "ECKRJ",
                    "MSN": "19000196",
                    "fabricacion": "noviembre-08",
                    "motor": "CF34-10E",
                    "entrega": "20/11/2008",
                    "devolucion": "24/11/2020",
                    "pesoMax": "50.790",
                    "asientos": "120"


                },
                {
                    "modelo": "E195",
                    "matricula": "ECKXD",
                    "MSN": "19000244",
                    "fabricacion": "marzo-09",
                    "motor": "CF34-10E",
                    "entrega": "05/03/2009",
                    "devolucion": "24/11/2020",
                    "pesoMax": "50.790",
                    "asientos": "120"
                },
                {
                    "modelo": "E195",
                    "matricula": "ECKYO",
                    "MSN": "19000276",
                    "fabricacion": "abril-09",
                    "motor": "CF34-10E",
                    "entrega": "28/04/2011",
                    "devolucion": "28/04/2021",
                    "pesoMax": "50.790",
                    "asientos": "120"
                },
                {
                    "modelo": "E195",
                    "matricula": "ECKYP",
                    "MSN": "19000281",
                    "fabricacion": "abril-09",
                    "motor": "CF34-10E",
                    "entrega": "21/07/2011",
                    "devolucion": "21/07/2021",
                    "pesoMax": "50.790",
                    "asientos": "120"
                },
                {
                    "modelo": "E195",
                    "matricula": "ECLCQ",
                    "MSN": "19000303",
                    "fabricacion": "marzo-10",
                    "motor": "CF34-10E",
                    "entrega": "08/11/2016",
                    "devolucion": "08/02/2022",
                    "pesoMax": "50.790",
                    "asientos": "120"
                },
                {
                    "modelo": "E195",
                    "matricula": "ECLEK",
                    "MSN": "19000344",
                    "fabricacion": "marzo-10",
                    "motor": "CF34-10E",
                    "entrega": "03/11/2016",
                    "devolucion": "03/03/2022",
                    "pesoMax": "50.790",
                    "asientos": "120"
                },
                {
                    "modelo": "E195",
                    "matricula": "ECLFZ",
                    "MSN": "19000357",
                    "fabricacion": "junio-10",
                    "motor": "CF34-10E",
                    "entrega": "09/11/2016",
                    "devolucion": "09/04/2022",
                    "pesoMax": "50.790",
                    "asientos": "120"
                },
                {
                    "modelo": "E195",
                    "matricula": "ECLIN",
                    "MSN": "19000401",
                    "fabricacion": "diciembre-10",
                    "motor": "CF34-10E",
                    "entrega": "10/11/2016",
                    "devolucion": "10/05/2022",
                    "pesoMax": "50.790",
                    "asientos": "120"
                },
                {
                    "modelo": "E195",
                    "matricula": "ECLKM",
                    "MSN": "19000425",
                    "fabricacion": "marzo-11",
                    "motor": "CF34-10E",
                    "entrega": "14/11/2016",
                    "devolucion": "14/03/2023",
                    "pesoMax": "50.790",
                    "asientos": "120"
                },
                {
                    "modelo": "E195",
                    "matricula": "ECLKX",
                    "MSN": "19000437",
                    "fabricacion": "mayo-11",
                    "motor": "CF34-10E",
                    "entrega": "10/11/2016",
                    "devolucion": "10/04/2023",
                    "pesoMax": "50.790",
                    "asientos": "120"
                },
                {
                    "modelo": "E195",
                    "matricula": "ECLLR",
                    "MSN": "19000452",
                    "fabricacion": "agosto-11",
                    "motor": "CF34-10E",
                    "entrega": "07/11/2016",
                    "devolucion": "07/05/2023",
                    "pesoMax": "50.790",
                    "asientos": "120"
                }


            ]

        },
        {
            "nombreavion": "ATR 72-500",
            "texto": "Reconocidos a nivel mundial, pasan por ser el avión regional más exitoso. Con su fiable operación, hacen posible vuelos interislas en Baleares y Canarias. Además, operan rutas de baja densidad desde Alicante, Málaga o Melilla.",
            "imagen": "res/img/marcas/atr-72.png",
            "botonDetalle": "spanatr72500",
            "datatarget": "atr72500",
            "longitud": "Longitud : 27.16 m",
            "envergadura": "Envergadura : 27.05 m",
            "alcance": "Alcance : 1.650 km",
            "capacidad": "Capacidad : 64 (turista) +4 (busines)",
            "wifi": "",
            "titulodeta": "Detalles sobre la flota de Embraer ATR 72-500:",
            "aviones": [
                {
                    "modelo": "ATR",
                    "matricula": "EC MSM",
                    "MSN": "911",
                    "fabricacion": "agosto-10",
                    "motor": "PW100 series",
                    "entrega": "25/09/2017",
                    "devolucion": "25/09/2022",
                    "pesoMax": "22.500",
                    "asientos": "68"
                },
                {
                    "modelo": "ATR",
                    "matricula": "EC MUJ",
                    "MSN": "879",
                    "fabricacion": "julio-09",
                    "motor": "PW100 series",
                    "entrega": "08/01/2018",
                    "devolucion": "08/01/2023",
                    "pesoMax": "22.500",
                    "asientos": "68"
                },
                {
                    "modelo": "ATR",
                    "matricula": "EC MHJ",
                    "MSN": "982",
                    "fabricacion": "diciembre-11",
                    "motor": "PW100 series",
                    "entrega": "27/03/2018",
                    "devolucion": "27/03/2023",
                    "pesoMax": "22.500",
                    "asientos": "68"
                },
                {
                    "modelo": "ATR",
                    "matricula": "EC MZJ",
                    "MSN": "723",
                    "fabricacion": "diciembre-05",
                    "motor": "PW100 series",
                    "entrega": "19/09/2018",
                    "devolucion": "19/09/2023",
                    "pesoMax": "22.500",
                    "asientos": "68"
                }

            ]
        },
        {
            "nombreavion": "Boeing 737-800",
            "texto": "Es uno de los últimos modelos de la gama ‘737’ y ofrece la máxima fiabilidad. Sus reactores han sido los más demandados en toda la historia del sector de la aviación. Tiene una autonomía de casi 5.000 kilómetros y cuenta con 180 plazas, 12 de ellas en business.",
            "imagen": "res/img/marcas/boeing-737E.png",
            "botonDetalle": "spanBoeing737",
            "datatarget": "Boeing737",
            "longitud": "Longitud : 39.5 m",
            "envergadura": "Envergadura : 34.3 m",
            "alcance": "Alcance : 4.630 km",
            "capacidad": "Capacidad : 168 (turista) +12 (busines)",
            "wifi": "",
            "titulodeta": "Detalles sobre la flota de Boeing 737-800:",
            "aviones": [

                {
                    "modelo": "B738",
                    "matricula": "EC MPG",
                    "MSN": "60586",
                    "fabricacion": "junio-17",
                    "motor": "CFM56-7B",
                    "entrega": "15/06/2017",
                    "devolucion": "15/06/2029",
                    "pesoMax": "79.015",
                    "asientos": "189"
                },


            ]
        }
    ]
};
var numeroaviones;
var flotaExpress = class {
    constructor(modul) {

        numeroaviones = 0;
        for (let i = 0; i < flotaex.flota.length; i++) {

            calcularaviones(flotaex.flota[i]);
            let iddivtabla = flotaex.flota[i].datatarget;
            let idimagen = flotaex.flota[i].botonDetalle;

            let HTML = ' <div class="row {{datatarget}}"><div class="col-12 col-sm-5"> <h2>{{nombreavion}}</h2> <article> <p> {{texto}}</p> </article> </div> <div class="col-12 col-sm-7"> <div class=" col-md-12"> <img  src="{{imagen}}" alt="" /> <div class="row"> <div class="col-md-6"> <div class=" row col-md-12 marcasaling" id="{{botonDetalle}}">\n' +
                '    </div> <div class=" row col-12 marcasaling"> <button class="panel-trigger btn btn-info col-12" data-target="{{datatarget}}" style="\n' +
                '    margin-top: 2rem;\n' +
                '"> <span ">Más</span> <span class=" dn">Ocultar</span> detalles » </button></div></div> <div class="col-md-6" style="float : right;font-size: small;"><b> <div class="textoaviones-{{datatarget}}  bordeInferior"> </div><div class="bordeInferior ">{{longitud}}</div><div class="bordeInferior">{{envergadura}}</div><div class="bordeInferior">{{alcance}}</div><div class="bordeInferior">{{capacidad}}</div><div class="bordeInferior">{{wifi}}</div>  </b><div class="textopedidos-{{datatarget}} bordeInferior"><b> \n' +
                '        </b></div><b> </b></div></div> </div> </div> </div> <hr>';

            let HTMLPROCE = $.parseHTML(HTML.reemplazaMostachos(flotaex.flota[i]));
            let htrmltabla = '<div class=" flot-panel {{datatarget}}"> <h4>{{titulodeta}}</h4> <table id="tabla-flotas-{{datatarget}}" class="table-fleet-details"> <thead> <tr> <th>Módelo</th> <th>Matricula</th> <th>MSN</th> <th>Fabricación</th> <th>Motor</th> <th>Entrega</th> <th>Devolución</th> <th>Peso max. despegue</th> <th>Asientos</th> </tr> </thead> <tbody id={{datatarget}}>  </tbody></table> </div>';
            $('#div-flota-ex').append(HTMLPROCE);

            for (let j = 0; j < numeroaviones; j++) {
                let HTMLICON = '<span style="float : left;margin-right:0px;" class="sidebar-navigation-icon "><img src="res/img/marcas/icono-avion.png"   alt=""> </span>';
                $('#' + idimagen).append($.parseHTML(HTMLICON));

            }
            if(numeroaviones>1){
                $('.textoaviones-' + iddivtabla).append(numeroaviones + " Aviones");
            }else{
                $('.textoaviones-' + iddivtabla).append(numeroaviones + " Avión");
            }
            if (flotaex.flota[i].aviones.length != numeroaviones) {
                $('.textopedidos-' + iddivtabla).append("Tenemos encargados un total de " + flotaex.flota[i].aviones.length + " unidades");
            }
            $('.' + iddivtabla).append(htrmltabla.reemplazaMostachos(flotaex.flota[i]));
            for (let k = 0; k < flotaex.flota[i].aviones.length; k++) {
                let htrmldatos = '  <tr> <td> {{modelo}} </td> <td> {{matricula}} </td> <td> {{MSN}} </td> <td> {{fabricacion}} </td> <td> {{motor}} </td> <td> {{entrega}} </td> <td> {{devolucion}} </td> <td> {{pesoMax}} </td> <td> {{asientos}} </td> </tr>';
                $('#' + iddivtabla).append(htrmldatos.reemplazaMostachos(flotaex.flota[i].aviones[k]))
            }

        }


        $('.panel-trigger').click(function () {
            $('.' + this.getAttribute('data-target')).toggleClass('active');
            $('.span' + this.getAttribute('data-target')).toggleClass('dn');
        });
    }


}

function calcularaviones(flotas) {
    numeroaviones = 0;
    for (let i = 0; i < flotas.aviones.length; i++) {


        if (flotas.aviones[i].matricula != "") {
            numeroaviones = numeroaviones + 1
        }


    }
}